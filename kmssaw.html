<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Viagens dos SAW - Quilómetros Percorridos</title>
<style>
    :root {
        --bg-light: transparent;
        --bg-dark: transparent;
        --text-light: #000;
        --text-dark: #e0e0e0;
        --btn-bg-hover: #f0f0f0;
        --btn-border-color: #999;
        --btn-selected-bg: #666;
        --btn-selected-text: #fff;
        --ruler-border: #ccc;
        --tick-color: #888;
    }

    body {
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: transparent; /* Fundo transparente */
        color: var(--text-light);
    }

    @media (prefers-color-scheme: dark) {
        body {
            color: var(--text-dark);
        }
    }

    .container {
        max-width: 100%; /* Largura máxima para se ajustar ao iframe */
        margin: 20px auto 0; /* Reduzi a margem superior */
        padding: 0 10px; /* Reduzi o padding lateral */
        text-align: center;
    }

    /* RÉGUA DESKTOP */
    .ruler-container {
        position: relative;
        width: 100%;
        min-width: 300px; /* Largura mínima razoável para iframe */
        height: 100px; /* Altura reduzida */
        margin: 40px auto 10px; /* Margens ajustadas */
        border-top: 2px solid var(--ruler-border);
        overflow-x: auto;
        padding: 0 20px; /* Espaço lateral reduzido */
    }

    .ruler {
        position: relative;
        height: 100%;
        width: 58000px; /* Mantive a largura proporcional */
        user-select: none;
    }

    .tick {
        position: absolute;
        top: -5px; /* Ajustei a posição dos ticks */
        width: 1px;
        height: 10px; /* Ajustei a altura dos ticks */
        background: var(--tick-color);
    }

    .tick-label {
        position: absolute;
        top: 12px; /* Ajustei a posição das labels */
        font-size: 0.7rem; /* Reduzi o tamanho da fonte */
        color: var(--tick-color);
        white-space: nowrap;
        user-select: none;
        transform: translateX(-50%);
    }

    /* LOGO SAW (avião) desktop */
    .plane {
        position: absolute;
        top: -40px; /* Ajustei a posição vertical */
        width: 30px; /* Reduzi o tamanho */
        height: 30px; /* Reduzi o tamanho */
        pointer-events: none;
        transition: left 1s ease;
        z-index: 10;
        left: 1%; /* Posição inicial mais próxima do início */
    }
    .plane img {
        width: 100%;
        height: 100%;
        display: block;
    }

    /* PROGRESSO MOBILE */
    .mobile-progress {
        display: none;
        position: relative;
        width: 100%;
        height: 6px; /* Altura reduzida */
        background-color: #ddd;
        margin: 40px auto 10px; /* Margens ajustadas */
        border-radius: 3px;
        overflow: hidden;
    }

    .mobile-progress .progress-bar {
        position: absolute;
        height: 100%;
        background-color: #444;
        width: 0;
        transition: width 1s ease;
    }

    .plane-mobile {
        position: absolute;
        top: -25px; /* Ajustei a posição vertical */
        width: 20px; /* Reduzi o tamanho */
        height: 20px; /* Reduzi o tamanho */
        pointer-events: none;
        transition: left 1s ease;
        left: 1%; /* Posição inicial semelhante à da régua */
    }

    /* Botões */
    .events {
        display: flex;
        justify-content: center;
        gap: 5px; /* Reduzi o espaçamento entre botões */
        flex-wrap: wrap;
        margin: 8px 0 0;
    }

    .btn {
        cursor: pointer;
        border-radius: 6px; /* Bordas menos arredondadas */
        background-color: transparent;
        border: 1px solid var(--btn-border-color); /* Bordas mais finas */
        color: inherit;
        padding: 4px 8px; /* Padding menor */
        font-size: 0.75rem; /* Fonte menor */
        font-weight: 500;
        user-select: none;
        transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        text-align: center;
        min-width: 90px; /* Largura mínima menor */
    }

    .btn:hover {
        background-color: var(--btn-bg-hover);
    }

    .btn.selected {
        background-color: var(--btn-selected-bg);
        color: var(--btn-selected-text);
        border-color: var(--btn-selected-bg);
    }

    .summary {
        margin-top: 8px; /* Margem superior menor */
        font-size: 0.8rem; /* Fonte menor */
        font-weight: 500;
        color: var(--tick-color);
    }

    /* RESPONSIVO MOBILE */
    @media (max-width: 600px) {
        .ruler-container {
            display: none;
        }
        .mobile-progress {
            display: block;
        }
    }
</style>
</head>
<body>
    <div class="container">
        <div class="ruler-container" id="rulerContainer">
            <div class="plane" id="plane">
                <img src="https://static.wikia.nocookie.net/lolesports_gamepedia_en/images/6/6f/SAW_%28Portuguese_Team%29logo_square.png/revision/latest/scale-to-width-down/220?cb=20231108204631" alt="SAW Logo" />
            </div>
            <div class="ruler" id="ruler"></div>
        </div>

        <div class="mobile-progress" id="mobileProgress">
            <div class="progress-bar" id="progressBar"></div>
            <div class="plane-mobile" id="planeMobile">
                <img src="https://static.wikia.nocookie.net/lolesports_gamepedia_en/images/6/6f/SAW_%28Portuguese_Team%29logo_square.png/revision/latest/scale-to-width-down/220?cb=20231108204631" alt="SAW Logo" />
            </div>
        </div>

        <div class="events" id="buttons">
            <button class="btn" data-km="3600">IEM Katowice<br><strong>3.600 km</strong></button>
            <button class="btn" data-km="7800">PGL Cluj-Napoca<br><strong>7.800 km</strong></button>
            <button class="btn" data-km="6500">ESL Pro League S21<br><strong>6.500 km</strong></button>
            <button class="btn" data-km="39000">MRQ - IEM Melbourne + MESA<br><strong>39.000 km</strong></button>
        </div>

        <div class="events" style="margin-top: 6px;">
            <button class="btn" id="selectAllBtn">Selecionar todas as rotas</button>
        </div>

        <div class="summary" id="summary">Total: 0 km</div>
    </div>

<script>
    const buttons = document.querySelectorAll('#buttons .btn');
    const selectAllBtn = document.getElementById('selectAllBtn');
    const totalEl = document.getElementById('summary');
    const plane = document.getElementById('plane');
    const ruler = document.getElementById('ruler');
    const maxKm = 58000;

    const mobileProgress = document.getElementById('mobileProgress');
    const progressBar = document.getElementById('progressBar');
    const planeMobile = document.getElementById('planeMobile');

    // Criar os ticks da régua (desktop)
    const step = 5000;
    ruler.innerHTML = ''; // Limpar quaisquer ticks anteriores
    for (let i = 0; i <= maxKm; i += step) {
        const percent = (i / maxKm) * 100;
        const tick = document.createElement('div');
        tick.className = 'tick';
        tick.style.left = `${percent}%`;

        const label = document.createElement('div');
        label.className = 'tick-label';
        label.style.left = `${percent}%`;
        label.textContent = `${i.toLocaleString()} km`;

        ruler.appendChild(tick);
        ruler.appendChild(label);
    }

    let selected = new Set();

    function update() {
        let sum = 0;
        selected.forEach(i => {
            sum += parseInt(buttons[i].dataset.km);
        });
        totalEl.textContent = `Total: ${sum.toLocaleString()} km`;

        const percent = sum > 0 ? Math.min(sum / maxKm, 1) * 100 : 0;

        // Desktop: posição do logo, com limites para não sair da régua
        const leftPercent = Math.min(Math.max(percent, 1), 99); // Ajustei os limites
        plane.style.left = `calc(${leftPercent}% - 15px)`; // Ajustei o cálculo

        // Mobile
        progressBar.style.width = `${percent}%`;
        planeMobile.style.left = `calc(${percent}% - 10px)`; // Ajustei o cálculo
    }

    buttons.forEach((btn, i) => {
        btn.addEventListener('click', () => {
            if (selected.has(i)) {
                selected.delete(i);
                btn.classList.remove('selected');
            } else {
                selected.add(i);
                btn.classList.add('selected');
            }
            update();
        });
    });

    selectAllBtn.addEventListener('click', () => {
        if (selected.size === buttons.length) {
            selected.clear();
            buttons.forEach(btn => btn.classList.remove('selected'));
        } else {
            selected = new Set(Array.from(buttons.keys()));
            buttons.forEach(btn => btn.classList.add('selected'));
        }
        update();
    });

    function checkMobileView() {
        const isMobile = window.innerWidth <= 600;
        if (isMobile) {
            mobileProgress.style.display = 'block';
            document.getElementById('rulerContainer').style.display = 'none';
        } else {
            mobileProgress.style.display = 'none';
            document.getElementById('rulerContainer').style.display = 'block';
        }
    }

    window.addEventListener('resize', () => {
        checkMobileView();
    });

    window.addEventListener('load', () => {
        checkMobileView();
        update();
    });
</script>
</body>
</html>
