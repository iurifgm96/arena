<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Stage 3 - Major Playoffs</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <style>
        :root {
            /* Tema Claro (Default) & Cores Base do Arena */
            --cor-arena-azul: #0074FF;
            --cor-arena-azul-hover: #005fcc; 
            --cor-sucesso: #28a745;
            --cor-perigo: #dc3545;
            --cor-aviso: #ffc107;
            
            --cor-fundo-simulador-body: transparent; 
            --cor-fundo-cartao: #ffffff;
            --cor-texto-principal: #212529; 
            --cor-texto-secundario: #525f6c; 
            --cor-borda: #dee2e6; 
            --cor-sombra: rgba(0, 0, 0, 0.07); 

            --fonte-principal: 'Roboto', 'Segoe UI', Arial, sans-serif;
            --border-radius-padrao: 8px; 
            --sombra-cartao: 0 4px 12px var(--cor-sombra);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                /* Overrides para Tema Escuro */
                --cor-arena-azul: #1e88e5; 
                --cor-arena-azul-hover: #42a5f5;
                --cor-sucesso: #4caf50;
                --cor-perigo: #f44336;
                --cor-aviso: #ff9800;

                --cor-fundo-cartao: #2c2f3b; 
                --cor-texto-principal: #e4e6eb; 
                --cor-texto-secundario: #b0b3b8; 
                --cor-borda: #424651; 
                --cor-sombra: rgba(0, 0, 0, 0.25); 
            }
        }

        body {
            font-family: var(--fonte-principal);
            line-height: 1.4; 
            margin: 0;
            padding: 8px; 
            background-color: var(--cor-fundo-simulador-body); 
            color: var(--cor-texto-principal);
            transition: background-color 0.3s, color 0.3s; 
            font-size: 13px; 
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background-color: var(--cor-fundo-simulador-body); 
            padding-bottom: 20px;
        }

        .container > h1 { display: none; }

        .controls {
            display: flex;
            flex-direction: column; 
            align-items: stretch; 
            margin-bottom: 15px; 
            padding: 8px;  
            background-color: var(--cor-fundo-cartao);
            border-radius: var(--border-radius-padrao);
            box-shadow: var(--sombra-cartao);
            border: 1px solid var(--cor-borda);
            gap: 8px; 
        }
        .controls .buttons { 
            display: flex; 
            gap: 6px; 
            width: 100%; 
        }
        .controls .buttons button {
            flex-grow: 1; 
            padding: 5px 6px; 
            font-size: 0.65em; 
            min-height: 28px; 
        }
        .controls .round-indicator { 
            font-size: 0.8em; 
            font-weight: 600; 
            color: var(--cor-texto-secundario); 
            text-align: center; 
            width: auto; 
            margin: 8px auto 0 auto; 
            padding: 4px 8px; 
            background-color: color-mix(in srgb, var(--cor-arena-azul) 10%, var(--cor-fundo-cartao)); 
            border: 1px solid color-mix(in srgb, var(--cor-arena-azul) 30%, transparent);
            border-radius: 20px; 
            display: inline-block; 
        }
        .controls .round-indicator #currentRound { 
            color: var(--cor-arena-azul); 
            font-weight: 700; 
            font-size: 1.1em; 
        }
        
        #socialShareMenu {
            margin-top: 10px;
            padding: 12px;
            background-color: var(--cor-fundo-cartao);
            border: 1px solid var(--cor-borda);
            border-radius: var(--border-radius-padrao);
            text-align: center;
            box-shadow: var(--sombra-cartao);
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
            align-items: center; 
        }

        #socialShareMenu p {
            margin-top: 0;
            margin-bottom: 10px;
            font-weight: 600; 
            color: var(--cor-texto-principal);
            font-size: 0.9em; 
        }

        #socialShareMenu button {
            border: none;
            padding: 8px 15px; 
            border-radius: 6px; 
            cursor: pointer;
            margin: 0; 
            font-size: 0.75em; 
            font-weight: 500;
            width: 80%; 
            max-width: 200px; 
            transition: background-color 0.2s, transform 0.1s;
        }
        
        #socialShareMenu button:hover {
            transform: translateY(-1px);
        }

        #shareOnXButton {
            background-color: #1DA1F2; 
            color: #ffffff;
        }
        #shareOnXButton:hover {
            background-color: #0c85d0;
        }
        
        #shareOnWhatsAppButton { 
            background-color: #25D366; 
            color: #ffffff;
        }
        #shareOnWhatsAppButton:hover {
            background-color: #1DAA50; 
        }

        #closeShareMenuButton {
            background-color: var(--cor-perigo);
            color: #ffffff;
            font-size: 0.7em; 
            padding: 6px 12px;
            width: auto; 
            margin-top: 5px; 
        }
        #closeShareMenuButton:hover {
            background-color: color-mix(in srgb, var(--cor-perigo) 80%, black);
        }


        .stage-sections, .results-sections, #previousRoundSummarySection { 
            display: flex;
            flex-direction: column; 
            gap: 10px; 
        }
        
        #previousRoundSummarySection { }
        .summary-controls { 
            display: flex;
            flex-wrap: wrap;
            gap: 5px; 
            margin-bottom: 6px; 
            padding-bottom: 6px; 
            border-bottom: 1px solid var(--cor-borda);
        }
        .summary-controls button {
            padding: 3px 7px; 
            font-size: 0.7em; 
            background-color: var(--cor-fundo-cartao);
            color: var(--cor-arena-azul);
            border: 1px solid var(--cor-arena-azul);
            box-shadow: none;
        }
        .summary-controls button.active,
        .summary-controls button:hover {
            background-color: var(--cor-arena-azul);
            color: white;
        }
        .summary-controls button:disabled { 
            background-color: var(--cor-borda);
            color: var(--cor-texto-secundario);
            border-color: var(--cor-borda);
            cursor: default;
        }

        #previousRoundSummaryContainer .summary-pool-header {
            font-size: 0.75em; 
            margin-top: 6px; 
            margin-bottom: 3px; 
        }
        #previousRoundSummaryContainer .matchup { 
            margin-bottom: 3px; 
            pointer-events: none; 
            opacity: 0.85;
        }
         #previousRoundSummaryContainer .matchup .team {
            font-size: 0.7em; 
            height: 2.6em; 
            padding: 0 5px; 
        }
        #previousRoundSummaryContainer .team-logo {
            height: 0.9em; 
            width: 1.5em; 
        }


        .section {
            background-color: var(--cor-fundo-cartao);
            padding: 10px; 
            border-radius: var(--border-radius-padrao);
            box-shadow: var(--sombra-cartao);
            border: 1px solid var(--cor-borda);
            margin-bottom: 15px; 
        }
        
        #advancedSection::before, #eliminatedSection::before,
        #standingsSection::before, #matchupsSection::before,
        #previousRoundSummarySection::before,
        #twitchPlayerSection::before,
        #playoffBracketSection::before { 
            content: attr(data-title); 
            font-weight: 700; 
            font-size: 1em; 
            color: var(--cor-texto-principal); 
            display: block;
            margin-bottom: 10px; 
            padding-bottom: 4px; 
            border-bottom: 2px solid var(--cor-arena-azul); 
        }
        #previousRoundSummarySection::before {
            font-size: 0.85em; 
            font-weight: 600;
            color: var(--cor-texto-secundario);
            border-bottom: 1px solid var(--cor-borda);
        }
        #twitchPlayerSection::before { 
        }


        .pool-header { 
            font-weight: 600;
            font-size: 0.85em; 
            color: var(--cor-texto-secundario);
            margin-top: 10px; 
            margin-bottom: 6px; 
            padding-bottom: 3px; 
            border-bottom: 1px solid var(--cor-borda);
        }
        .pool-header:first-child { margin-top: 0; }

        #advancedSection ul, #eliminatedSection ul {
            list-style-type: none;
            padding: 0;
            margin-top: 5px; 
        }
        #advancedSection li, #eliminatedSection li {
            font-weight: 500;
            padding: 3px 0; 
            font-size: 0.85em; 
            border-bottom: 1px dashed var(--cor-borda); 
            display: flex; 
            align-items: center;
            justify-content: space-between; 
            overflow: hidden; 
        }
        #advancedSection li .team-display-container, 
        #eliminatedSection li .team-display-container {
            flex-grow: 1; 
            min-width: 0; 
            margin-right: 5px; 
        }
        #advancedSection li .score-span,
        #eliminatedSection li .score-span {
            flex-shrink: 0; 
            white-space: nowrap; 
            font-size: 0.8em; 
            color: var(--cor-texto-secundario);
        }

        #advancedSection li:last-child, #eliminatedSection li:last-child { border-bottom: none; }
        #advancedSection li { color: var(--cor-sucesso); }
        #eliminatedSection li { color: var(--cor-perigo); }

        #standingsTable {
            width: 100%;
            margin-top: 5px; 
            border-collapse: separate; 
            border-spacing: 0; 
        }
        #standingsTable thead {
            display: none; 
        }
        #standingsTable tr { 
            display: block; 
            margin-bottom: 6px; 
            border: 1px solid var(--cor-borda);
            border-radius: var(--border-radius-padrao);
            padding: 6px 8px; 
            background-color: var(--cor-fundo-cartao); 
            box-shadow: 0 1px 2px rgba(0,0,0,0.04); 
        }
        #standingsTable tr:last-child {
            margin-bottom: 0;
        }
        #standingsTable td {
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 4px 0; 
            border-bottom: 1px dashed var(--cor-borda); 
            text-align: right; 
            font-size: 0.9em; 
        }
        #standingsTable td:last-child {
            border-bottom: none; 
        }
        #standingsTable td::before { 
            content: attr(data-label); 
            font-weight: 600;
            color: var(--cor-texto-secundario);
            margin-right: 6px; 
            text-align: left; 
            font-size: 0.9em; 
        }
        #standingsTable td .team-cell-standings {
            justify-content: flex-end; 
            flex-grow: 1; 
        }
        #standingsTable td .team-cell-standings .team-name-text {
             margin-left: 0.2em; 
        }
        .mobile-standings-nav { 
            display: flex;
            justify-content: center; 
            align-items: center;
            margin-top: 8px;
            gap: 15px; 
        }
        .mobile-standings-nav button {
            padding: 5px 10px;
            font-size: 1em; 
            line-height: 1;
        }
        .mobile-standings-indicator {
            font-size: 0.8em;
            color: var(--cor-texto-secundario);
        }


        .matchup {
            display: flex;
            justify-content: space-between;
            align-items: stretch; 
            margin-bottom: 6px; 
            border: 1px solid var(--cor-borda);
            border-radius: var(--border-radius-padrao);
            background-color: var(--cor-fundo-cartao); 
            overflow: hidden; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.02); 
            transition: box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out;
        }
        .matchup:hover {
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
            transform: translateY(-1px); 
        }

        .matchup .team {
            cursor: pointer;
            padding: 0 6px; 
            transition: background-color 0.2s, color 0.2s, transform 0.2s;
            flex: 1; 
            font-weight: 500; 
            font-size: 0.75em; 
            color: var(--cor-texto-principal); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 2.6em; 
            min-width: 0; 
            overflow: hidden; 
        }
        .matchup .team:first-child { border-right: 1px solid var(--cor-borda); }
        
        .team-display-container {
            display: flex;
            align-items: center;
            justify-content: center; 
            width: 100%; 
            overflow: hidden; 
        }

        .team-name-text { 
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-left: 0.2em; 
        }

        .matchup .team:not(.winner):not(.loser):hover {
            background-color: color-mix(in srgb, var(--cor-arena-azul) 10%, var(--cor-fundo-cartao));
            color: var(--cor-arena-azul);
        }
        .matchup .team.winner { background-color: var(--cor-sucesso); color: white; font-weight: 600; } 
        .matchup .team.loser {
            background-color: var(--cor-fundo-cartao); 
            color: var(--cor-texto-secundario);
            text-decoration: line-through;
            opacity: 0.65; 
        }

        button { 
            padding: 6px 10px; 
            background-color: var(--cor-arena-azul);
            color: white;
            border: none;
            border-radius: var(--border-radius-padrao);
            cursor: pointer;
            font-weight: 600; 
            font-size: 0.75em; 
            transition: background-color 0.15s ease-in-out, box-shadow 0.15s ease, transform 0.15s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button#prevRoundButton { 
            background-color: var(--cor-texto-secundario);
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }
        button#prevRoundButton:hover {
            background-color: color-mix(in srgb, var(--cor-texto-secundario) 85%, black);
        }
        button#nextRoundButton { 
             background-color: var(--cor-sucesso); 
        }
        button#nextRoundButton:hover {
            background-color: color-mix(in srgb, var(--cor-sucesso) 85%, black);
        }
        button#shareResultsButton { 
            background-color: var(--cor-aviso); 
            color: var(--cor-texto-principal); 
        }
        button#shareResultsButton:hover {
            background-color: color-mix(in srgb, var(--cor-aviso) 85%, black);
        }


        button:hover {
            background-color: var(--cor-arena-azul-hover);
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
            transform: translateY(-1px);
        }
        button:active {
            background-color: color-mix(in srgb, var(--cor-arena-azul) 70%, black);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            transform: translateY(0px);
        }
        button:disabled {
            background-color: #cccccc; 
            color: #666666;
            opacity: 0.7; 
            cursor: not-allowed;
            box-shadow: none;
            transform: translateY(0px);
        }

        .team-logo { 
            height: 1.0em;  
            width: 1.6em;   
            margin-right: 3px; 
            object-fit: contain; 
            flex-shrink: 0; 
        }
        #standingsTable .team-logo { 
            height: 0.9em; 
            width: 1.5em;   
            margin-right: 2px; 
        }
        #advancedList li .team-logo, #eliminatedList li .team-logo { 
            height: 0.8em; 
            width: 1.4em;   
            margin-right: 2px; 
        }

        #standingsTable td[data-label="Status"] span.status-text-advanced { color: var(--cor-sucesso); font-weight: 700; }
        #standingsTable td[data-label="Status"] span.status-text-eliminated { color: var(--cor-perigo); font-weight: 700; }
        #standingsTable td[data-label="Status"] span.status-text-active { color: var(--cor-texto-secundario); font-weight: 500; }

        .summary-match-line {
            display: flex;
            align-items: center;
            font-size: 0.75em; 
            padding: 2px 4px; 
            border-bottom: 1px dotted var(--cor-borda);
        }
        .summary-match-line:last-child {
            border-bottom: none;
        }
        .summary-match-line .team-logo {
            height: 0.9em; 
            width: 1.4em;   
            margin-right: 3px; 
            margin-left: 1px; 
        }
        .summary-match-line .winner-name {
            font-weight: 600;
            color: var(--cor-sucesso);
        }
        .summary-match-line .loser-name {
            color: var(--cor-texto-secundario);
        }
        .summary-match-line .defeated-text {
            margin: 0 4px; 
            font-style: italic;
            font-size: 0.9em;
            color: var(--cor-texto-secundario);
        }

        #pageFooter {
            text-align: center;
            padding: 20px 10px;
            margin-top: 30px; 
            border-top: 1px solid var(--cor-borda);
            font-size: 0.8em;
            color: var(--cor-texto-secundario);
        }

        #pageFooter p {
            margin: 5px 0;
        }
        
        #twitch-embed { 
            width: 100%;
            height: 100%;
        }
        #twitch-embed iframe { 
            width: 100%;
            height: 100%;
        }
        #twitchPlayerSection .section-content-wrapper { 
            width: 100%;
            aspect-ratio: 16 / 9; 
            max-height: 480px; 
            margin: 0 auto; 
        }

        /* Playoffs Specific Styles */
        #playoffBracketContainer {
            display: flex;
            justify-content: space-around;
            gap: 15px;
            padding: 10px 0;
            overflow-x: auto; /* Allow horizontal scrolling on smaller screens */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
            padding-bottom: 20px; /* Space for scrollbar */
        }

        .bracket-round {
            flex-shrink: 0; /* Prevent rounds from shrinking */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center matches vertically */
            align-items: center;
            padding: 10px 5px;
            min-width: 180px; /* Minimum width for each round column */
        }

        .bracket-round-title {
            font-weight: 700;
            font-size: 0.9em;
            color: var(--cor-arena-azul);
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid var(--cor-arena-azul);
            padding-bottom: 5px;
            width: 100%;
        }

        .bracket-match {
            display: flex;
            flex-direction: column;
            border: 1px solid var(--cor-borda);
            border-radius: var(--border-radius-padrao);
            background-color: var(--cor-fundo-cartao);
            margin-bottom: 15px; /* Space between matches */
            width: 100%;
            max-width: 250px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .bracket-match-teams {
            display: flex;
            flex-direction: column;
            border-bottom: 1px solid var(--cor-borda);
            padding-top: 5px; /* Added for top spacing */
        }
        .bracket-match-teams:last-child {
            border-bottom: none;
        }
        
        .bracket-team-entry {
            display: flex;
            align-items: center;
            padding: 5px 10px;
            transition: background-color 0.2s, color 0.2s;
            font-size: 0.8em;
            height: 2.8em; /* Fixed height for consistent look */
        }

        .bracket-team-entry.clickable {
            cursor: pointer;
        }
        .bracket-team-entry:not(.clickable) {
            cursor: default;
        }

        .bracket-team-entry:first-child {
            border-bottom: 1px solid var(--cor-borda);
        }

        .bracket-team-entry.clickable:not(.winner):not(.loser):hover {
            background-color: color-mix(in srgb, var(--cor-arena-azul) 10%, var(--cor-fundo-cartao));
            color: var(--cor-arena-azul);
        }

        .bracket-team-entry.winner {
            background-color: var(--cor-sucesso);
            color: white;
            font-weight: 600;
        }

        .bracket-team-entry.loser {
            background-color: var(--cor-fundo-cartao);
            color: var(--cor-texto-secundario);
            text-decoration: line-through;
            opacity: 0.65;
        }

        .bracket-team-entry .team-logo {
            height: 1.1em;
            width: 1.8em;
            margin-right: 5px;
        }

        .bracket-match-info {
            padding: 5px 10px;
            font-size: 0.7em;
            color: var(--cor-texto-secundario);
            text-align: right;
            border-top: 1px solid var(--cor-borda); /* Separator for info */
        }
        /* Hide score span in bracket matches by default, show on hover or for winner/loser */
        .bracket-team-entry .score-span {
            font-size: 0.8em;
            margin-left: auto; /* Push score to the right */
            color: var(--cor-texto-secundario); /* Default color for score */
        }

        .bracket-team-entry.winner .score-span {
            color: white; /* White for winner score */
        }

        @media (min-width: 768px) { 
            body {
                padding: 12px; 
                font-size: 14px; 
            }
            .controls {
                flex-direction: row; 
                padding: 10px 15px; 
                align-items: center; 
                margin-bottom: 15px; 
            }
            .controls .buttons {
                width: auto; 
            }
            .controls .buttons button { 
                padding: 7px 14px; 
                font-size: 0.8em; 
            }
            .controls .round-indicator { 
                margin: 0 0 0 auto; 
                padding: 6px 12px; 
                font-size: 0.9em; 
            }
            .controls .round-indicator #currentRound {
                 font-size: 1.1em; 
            }

            .stage-sections, .results-sections { 
                display: flex; 
                flex-direction: row; 
                gap: 15px; 
            }
            #previousRoundSummarySection { 
                display: flex;
                flex-direction: row; 
                gap: 15px;
            }
            
             .section {
                padding: 12px; 
            }
            #matchupsSection { flex: 2; }
            #standingsSection { flex: 3; }
            .results-sections .section { flex: 1; }
            
            #previousRoundSummarySection > .summary-controls {
                flex-shrink: 0; 
            }

            #previousRoundSummarySection > #previousRoundSummaryContainer {
                flex-grow: 1; 
                min-width: 0;   
                overflow-x: auto; 
            }


            #standingsTable {
                font-size: 0.85em; 
                border-collapse: collapse; 
            }
            #standingsTable thead {
                display: table-header-group; 
            }
            #standingsTable tr { 
                display: table-row;
                margin-bottom: 0;
                border: none; 
                border-radius: 0;
                padding: 0;
                background-color: transparent;
                box-shadow: none;
            }
            #standingsTable th, #standingsTable td { 
                display: table-cell; 
                padding: 5px 7px; 
                text-align: left; 
                border-bottom: 1px solid var(--cor-borda); 
                vertical-align: middle; 
            }
            #standingsTable td::before { 
                display: none; 
            }
            #standingsTable th { 
                font-size: 0.85em; 
                vertical-align: middle;
            } 
            #standingsTable thead tr:first-child th {
                 border-top: 1px solid var(--cor-borda);
            }
            #standingsTable tbody tr:last-child td {
                 border-bottom: 1px solid var(--cor-borda); 
            }
            #standingsTable td .team-cell-standings { 
                 justify-content: flex-start;
            }


            .matchup .team {
                padding: 0 10px; 
                font-size: 0.85em; 
                height: 3.0em; 
            }
             .team-name-text { 
                margin-left: 0.3em; 
            }
            
            .team-logo { 
                height: 1.2em;  
                width: 2.0em;   
                margin-right: 5px; 
            }
            #standingsTable .team-logo { 
                height: 1.1em; 
                width: 1.8em;   
                margin-right: 4px; 
            }
            #advancedList li .team-logo, #eliminatedList li .team-logo { 
                height: 1em; 
                width: 1.6em;   
                margin-right: 3px; 
            }
             #advancedSection::before, #eliminatedSection::before,
            #standingsSection::before, #matchupsSection::before,
            #previousRoundSummarySection::before,
            #twitchPlayerSection::before { 
                font-size: 1.05em; 
            }
            #previousRoundSummarySection::before {
                font-size: 0.9em; 
            }
            .pool-header { 
                font-size: 0.9em; 
            }
             #advancedSection li, #eliminatedSection li {
                font-size: 0.9em; 
            }
            #previousRoundSummaryContainer .summary-pool-header {
                font-size: 0.8em; 
            }
            .summary-match-line {
                font-size: 0.75em; 
                padding: 2px 3px; 
            }
            .summary-match-line .team-logo {
                height: 0.9em; 
                width: 1.5em; 
            }

            #standingsTable td span.status-text-advanced { color: var(--cor-sucesso); font-weight: 700; }
            #standingsTable td span.status-text-eliminated { color: var(--cor-perigo); font-weight: 700; }
            #standingsTable td span.status-text-active { color: var(--cor-texto-secundario); font-weight: 500; }
            
            @media (max-width: 767px) {
                #twitchPlayerSection .section-content-wrapper {
                    max-height: 300px; 
                }
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Simulador - Stage 3 Playoffs</h1>

        <div class="controls">
            <div class="buttons">
                <button id="resetButton">Reiniciar</button>
                <!-- Removidos botões de navegação de ronda -->
                <button id="shareResultsButton" style="display: none;">Partilhar Resultados</button>
            </div>
            <div id="socialShareMenu" style="display: none;">
                <p>Escolha como partilhar:</p>
                <button id="shareOnXButton">Partilhar no X</button>
                <button id="shareOnWhatsAppButton">Partilhar no WhatsApp</button> 
                <button id="closeShareMenuButton">Fechar</button>
            </div>
            <div class="round-indicator">Ronda: <span id="currentRound">Quartos-de-final</span></div>
        </div>

        <div id="playoffBracketSection" class="section" data-title="Chave de Playoffs">
            <div id="playoffBracketContainer">
                <!-- Quarterly Final Round -->
                <div class="bracket-round" id="quarterFinals">
                    <div class="bracket-round-title">Quartos-de-final</div>
                    <!-- Matches will be dynamically inserted here -->
                </div>

                <!-- Semi Final Round -->
                <div class="bracket-round" id="semiFinals">
                    <div class="bracket-round-title">Meias-finais</div>
                    <!-- Matches will be dynamically inserted here -->
                </div>

                <!-- Grand Final Round -->
                <div class="bracket-round" id="grandFinal">
                    <div class="bracket-round-title">Grande Final</div>
                    <!-- Match will be dynamically inserted here -->
                </div>
            </div>
        </div>

        <div id="twitchPlayerSection" class="section" data-title="Assiste em Direto!">
            <div class="section-content-wrapper">
                 <div id="twitch-embed"></div>
            </div>
        </div>

    </div>

    <footer id="pageFooter">
        <p>Idealizado e produzido por: Iúri Martins</p>
        <p>&copy; <span id="currentYear"></span> Todos os direitos reservados.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // As 8 equipas que avançaram para os Playoffs, incluindo todos os detalhes
            // A ordem aqui não importa tanto para o emparelhamento, já que será definido explicitamente.
            const initialPlayoffTeams = [
                { id: 13, name: 'FURIA', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/FURIA-1.png' },
                { id: 11, name: 'paiN', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/PAIN-1.png' },
                { id: 14, name: 'FaZe', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/FAZE.png' },
                { id: 5, name: 'The MongolZ', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/THE-MONGOLZ.png' },
                { id: 7, name: 'NAVI', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/NATUS-VINCERE.png' },
                { id: 1, name: 'Vitality', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/VITALITY.png' },
                { id: 3, name: 'Spirit', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/SPIRIT.png' },
                { id: 2, name: 'MOUZ', logoUrl: 'https://arena.rtp.pt/wp-content/uploads/2025/06/MOUZ.png' },
            ];

            let teams = []; // Current teams in the simulator, with status and winners
            let currentRoundIndex = 0; // 0: Quartos, 1: Semis, 2: Final
            let playoffBracket = []; // Bracket structure: array of rounds, each round is an array of matches
            let historyStack = []; // For undo functionality

            const roundNames = ["Quartos-de-final", "Meias-finais", "Grande Final", "Campeão"]; // Round names for display

            const quarterFinalsDiv = document.getElementById('quarterFinals');
            const semiFinalsDiv = document.getElementById('semiFinals');
            const grandFinalDiv = document.getElementById('grandFinal');
            const currentRoundSpan = document.getElementById('currentRound');
            const resetButton = document.getElementById('resetButton');
            // const prevRoundButton = document.getElementById('prevRoundButton'); // Removido
            // const nextRoundButton = document.getElementById('nextRoundButton'); // Removido
            const shareResultsButton = document.getElementById('shareResultsButton');
            const socialShareMenu = document.getElementById('socialShareMenu');
            const shareOnXButton = document.getElementById('shareOnXButton');
            const shareOnWhatsAppButton = document.getElementById('shareOnWhatsAppButton');
            const closeShareMenuButton = document.getElementById('closeShareMenuButton');
            const currentYearSpan = document.getElementById('currentYear');
            const twitchPlayerSection = document.getElementById('twitchPlayerSection');
            const twitchEmbedDiv = document.getElementById('twitch-embed');

            // --- Utility Functions ---
            function deepCopy(obj) { return JSON.parse(JSON.stringify(obj)); }

            function getTeamById(id) {
                return teams.find(team => team.id === id);
            }

            // Helper to recursively clear results downstream from a given match
            function clearDownstreamMatchResultsRecursive(round, matchIndex) {
                console.log(`[clearDownstream] Clearing downstream from Round ${round}, Match ${matchIndex}`);
                if (!playoffBracket[round] || !playoffBracket[round][matchIndex]) return;

                const match = playoffBracket[round][matchIndex];
                if (match.winnerId !== null) {
                    const winnerTeam = getTeamById(match.winnerId);
                    if (winnerTeam) winnerTeam.isWinner = false;
                    const loserTeam = getTeamById(match.loserId);
                    if (loserTeam) loserTeam.isEliminated = false;
                    
                    match.winnerId = null;
                    match.loserId = null;
                    console.log(`[clearDownstream] Match ${round}-${matchIndex} cleared. New state:`, deepCopy(match));
                }
                
                // If this match is not the final, recursively clear the next one it feeds into
                if (round < 2) {
                    const nextRoundMatchIndex = Math.floor(matchIndex / 2); // 0, 1 for SF, 0 for Final
                    const nextMatch = playoffBracket[round + 1][nextRoundMatchIndex];

                    if (nextMatch) {
                        // Determine which slot this match was feeding and clear it
                        // QF0 and QF1 feed into SF0 (index 0)
                        // QF2 and QF3 feed into SF1 (index 1)
                        if (matchIndex % 2 === 0) { // first match of the pair (0, 2 for QF) -> feeds team1 slot in next round
                            // Check if team1Id of nextMatch was indeed the winner of current match
                            const currentMatchWinnerId = match.winnerId;
                            if (nextMatch.team1Id === currentMatchWinnerId) {
                                console.log(`[clearDownstream] Clearing team1Id from Round ${round + 1}, Match ${nextRoundMatchIndex}`);
                                nextMatch.team1Id = null;
                            }
                        } else { // second match of the pair (1, 3 for QF) -> feeds team2 slot in next round
                             // Check if team2Id of nextMatch was indeed the winner of current match
                             const currentMatchWinnerId = match.winnerId;
                             if (nextMatch.team2Id === currentMatchWinnerId) {
                                console.log(`[clearDownstream] Clearing team2Id from Round ${round + 1}, Match ${nextRoundMatchIndex}`);
                                nextMatch.team2Id = null;
                             }
                        }
                    }
                    // Recursively clear further downstream if the next match was also affected
                    clearDownstreamMatchResultsRecursive(round + 1, nextRoundMatchIndex);
                }
            }


            // --- UI Rendering Functions ---
            function renderTwitchPlayer(){
                twitchPlayerSection.style.display = 'block'; 
                if (twitchEmbedDiv) { 
                    twitchEmbedDiv.innerHTML = ''; 
                    new Twitch.Embed("twitch-embed", {
                        width: "100%",
                        height: "100%", 
                        channel: "rtparenacs", // Canal de Twitch
                        layout: "video",
                        autoplay: false, 
                        parent: ["arena.rtp.pt", "www.arena.rtp.pt", "iurifgm96.github.io", "localhost"]
                    });
                } else {
                    twitchPlayerSection.style.display = 'none';
                }
            }

            function createTeamDisplay(team) {
                const teamContainer = document.createElement('div'); // Using div to allow full width for text
                teamContainer.classList.add('team-display-container');

                if (team && team.logoUrl && team.logoUrl.trim() !== '') {
                    const img = document.createElement('img');
                    img.src = team.logoUrl;
                    img.alt = `Logo ${team.name}`;
                    img.classList.add('team-logo');
                    img.onerror = function() {
                        this.style.display='none'; // Hide image on error
                    };
                    teamContainer.appendChild(img);
                }
                const nameSpan = document.createElement('span');
                nameSpan.textContent = team ? team.name : 'TBD'; // "To Be Decided"
                nameSpan.classList.add('team-name-text');
                teamContainer.appendChild(nameSpan);
                return teamContainer;
            }

            function renderBracket() {
                console.log("[renderBracket] Rendering bracket. Current Round Index:", currentRoundIndex);
                quarterFinalsDiv.innerHTML = '<div class="bracket-round-title">Quartos-de-final</div>';
                semiFinalsDiv.innerHTML = '<div class="bracket-round-title">Meias-finais</div>';
                grandFinalDiv.innerHTML = '<div class="bracket-round-title">Grande Final</div>';

                // Display current round name
                currentRoundSpan.textContent = roundNames[currentRoundIndex] || "Fim do Torneio";

                // Loop through each round in the playoffBracket
                playoffBracket.forEach((roundMatches, round) => {
                    const targetDiv = [quarterFinalsDiv, semiFinalsDiv, grandFinalDiv][round];

                    roundMatches.forEach((match, matchIndex) => {
                        const team1 = getTeamById(match.team1Id);
                        const team2 = getTeamById(match.team2Id);
                        
                        const matchDiv = document.createElement('div');
                        matchDiv.classList.add('bracket-match');
                        matchDiv.setAttribute('data-round-index', round);
                        matchDiv.setAttribute('data-match-index', matchIndex);

                        const teamsDiv = document.createElement('div');
                        teamsDiv.classList.add('bracket-match-teams');

                        const team1Entry = document.createElement('div');
                        team1Entry.classList.add('bracket-team-entry');
                        team1Entry.appendChild(createTeamDisplay(team1));
                        
                        const team2Entry = document.createElement('div');
                        team2Entry.classList.add('bracket-team-entry');
                        team2Entry.appendChild(createTeamDisplay(team2));

                        // Determine if a team entry is clickable
                        // A match is clickable if it's in the current round AND both teams are defined (not TBD)
                        const isMatchClickable = (round === currentRoundIndex) && (team1 !== undefined && team1 !== null) && (team2 !== undefined && team2 !== null);
                        
                        if (isMatchClickable) {
                            team1Entry.classList.add('clickable');
                            team2Entry.classList.add('clickable');
                            team1Entry.onclick = () => selectWinner(round, matchIndex, team1.id);
                            team2Entry.onclick = () => selectWinner(round, matchIndex, team2.id);
                        } else {
                            team1Entry.onclick = null; // Ensure no stale click handler
                            team2Entry.onclick = null; // Ensure no stale click handler
                            team1Entry.classList.remove('clickable'); // Remove clickable class if not active
                            team2Entry.classList.remove('clickable'); // Remove clickable class if not active
                        }

                        // Apply winner/loser classes
                        if (match.winnerId === team1?.id) {
                            team1Entry.classList.add('winner');
                            team2Entry.classList.add('loser');
                        } else if (match.winnerId === team2?.id) {
                            team2Entry.classList.add('winner');
                            team1Entry.classList.add('loser');
                        } else {
                            // If no winner, ensure no winner/loser classes are present
                            team1Entry.classList.remove('winner', 'loser');
                            team2Entry.classList.remove('winner', 'loser');
                        }

                        teamsDiv.appendChild(team1Entry);
                        teamsDiv.appendChild(team2Entry);
                        matchDiv.appendChild(teamsDiv);

                        const infoDiv = document.createElement('div');
                        infoDiv.classList.add('bracket-match-info');
                        // Display date/time if available, otherwise just BO3
                        infoDiv.textContent = match.dateTime ? `${match.dateTime} - BO3` : `BO3`;
                        matchDiv.appendChild(infoDiv);

                        targetDiv.appendChild(matchDiv);
                    });
                });
                console.log("[renderBracket] Current playoffBracket state:", deepCopy(playoffBracket));
                updateControlButtonsState();
            }

            // --- Logic Functions ---
            function generateBracket() {
                // Initialize teams for the bracket based on the defined playoff teams
                teams = deepCopy(initialPlayoffTeams).map(team => ({
                    ...team,
                    isEliminated: false,
                    isWinner: false
                }));

                playoffBracket = []; // Clear previous bracket
                currentRoundIndex = 0;

                // Create a map for quick ID lookup by team name
                const teamMap = new Map(teams.map(t => [t.name, t.id]));
                const getIdByName = (name) => {
                    const id = teamMap.get(name);
                    if (id === undefined) console.error(`Team "${name}" not found in initialPlayoffTeams!`);
                    return id;
                };

                // Round 0: Quarter-finals - Specific pairings and times
                // Order to ensure correct semi-final progression:
                // SF0: (Winner QF0 vs Winner QF1)
                // SF1: (Winner QF2 vs Winner QF3)
                let quarterFinalsMatches = [
                    { 
                        team1Id: getIdByName('FURIA'), team2Id: getIdByName('paiN'), 
                        winnerId: null, loserId: null, dateTime: "Sexta-feira 00:30" 
                    }, // QF0
                    { 
                        team1Id: getIdByName('FaZe'), team2Id: getIdByName('The MongolZ'), 
                        winnerId: null, loserId: null, dateTime: "Sexta-feira 23:30" 
                    }, // QF1
                    { 
                        team1Id: getIdByName('NAVI'), team2Id: getIdByName('Vitality'), 
                        winnerId: null, loserId: null, dateTime: "Sexta-feira 19:00" 
                    }, // QF2
                    { 
                        team1Id: getIdByName('Spirit'), team2Id: getIdByName('MOUZ'), 
                        winnerId: null, loserId: null, dateTime: "Quinta-feira 20:00" 
                    } // QF3
                ];
                playoffBracket.push(quarterFinalsMatches);

                // Round 1: Semi-finals (placeholders)
                playoffBracket.push([
                    // SF0: Winner of (QF0) vs Winner of (QF1)
                    { team1Id: null, team2Id: null, winnerId: null, loserId: null, dateTime: "Sábado 19:00" },
                    // SF1: Winner of (QF2) vs Winner of (QF3)
                    { team1Id: null, team2Id: null, winnerId: null, loserId: null, dateTime: "Sábado 23:30" }
                ]);

                // Round 2: Grand Final (placeholder)
                playoffBracket.push([
                    { team1Id: null, team2Id: null, winnerId: null, loserId: null, dateTime: "Domingo 20:30" }
                ]);
                console.log("[generateBracket] Initial playoffBracket generated:", deepCopy(playoffBracket));
            }

            function selectWinner(round, matchIndex, winnerTeamId) {
                console.log(`[selectWinner] Attempting to select winner for Round ${round}, Match ${matchIndex}, Winner ID: ${winnerTeamId}`);
                // Prevent selection if it's not the current active round or if the winner ID is invalid (TBD)
                if (round !== currentRoundIndex || winnerTeamId === undefined || winnerTeamId === null) {
                    alert("Ainda não pode selecionar um vencedor para este confronto. Avance as rondas ou certifique-se que as equipas estão definidas.");
                    console.warn("[selectWinner] Selection prevented: Not current round or TBD team.", { round, currentRoundIndex, winnerTeamId });
                    return;
                }
                
                let match = playoffBracket[round][matchIndex];
                // Additional check in case the UI allowed a click on TBD due to a race condition or bug
                if (!match.team1Id || !match.team2Id) {
                    alert("As equipas deste confronto ainda não foram definidas. Por favor, complete os jogos anteriores.");
                    console.warn("[selectWinner] Selection prevented: Teams not defined for match.", match);
                    return;
                }

                // If clicking the currently selected winner, do nothing
                if (match.winnerId === winnerTeamId) {
                    console.log("[selectWinner] Already selected this winner. No change needed.");
                    return;
                }

                // Save current state before making changes
                historyStack.push(deepCopy({
                    playoffBracket: playoffBracket,
                    teams: teams,
                    currentRoundIndex: currentRoundIndex
                }));
                console.log("[selectWinner] State saved to historyStack. History length:", historyStack.length);

                // If changing a previous winner, clear its downstream effects
                if (match.winnerId !== null) {
                    console.log("[selectWinner] Previous winner detected. Clearing downstream results.");
                    clearDownstreamMatchResultsRecursive(round, matchIndex); // Clear this match and any further matches it affected
                }
                
                // Update current match result
                match.winnerId = winnerTeamId;
                match.loserId = (winnerTeamId === match.team1Id) ? match.team2Id : match.team1Id;
                console.log(`[selectWinner] Match ${round}-${matchIndex} updated. New match state:`, deepCopy(match));

                // Update team status (isWinner, isEliminated)
                const winnerTeam = getTeamById(winnerTeamId);
                const loserTeam = getTeamById(match.loserId);

                if (winnerTeam) winnerTeam.isWinner = true;
                if (loserTeam) loserTeam.isEliminated = true;

                // Propagate winner to the next round 
                if (round < 2) { // If not the final round
                    const nextRoundMatchIndex = Math.floor(matchIndex / 2);
                    const nextRoundMatch = playoffBracket[round + 1][nextRoundMatchIndex];

                    console.log(`[selectWinner] Propagating winner ${winnerTeamId} from Round ${round}, Match ${matchIndex} to Round ${round + 1}, Match ${nextRoundMatchIndex}`);
                    console.log("[selectWinner] Next Round Match BEFORE propagation:", deepCopy(nextRoundMatch));

                    if (matchIndex % 2 === 0) { // First match of the pair feeds into team1 slot of next match
                        nextRoundMatch.team1Id = winnerTeamId;
                    } else { // Second match of the pair feeds into team2 slot of next match
                        nextRoundMatch.team2Id = winnerTeamId;
                    }
                    console.log("[selectWinner] Next Round Match AFTER propagation:", deepCopy(nextRoundMatch));
                }

                // Re-render the bracket immediately after a selection
                renderBracket();

                // Check if all matches in the current round are decided, then auto-advance
                const currentRoundMatches = playoffBracket[currentRoundIndex];
                const allCurrentMatchesDecided = currentRoundMatches.every(m => m.winnerId !== null);

                if (allCurrentMatchesDecided && currentRoundIndex < 2) { // Not the final round
                    console.log("[selectWinner] All matches in current round decided. Auto-advancing to next round.");
                    // The logic previously in nextRound()
                    historyStack.push(deepCopy({
                        playoffBracket: playoffBracket,
                        teams: teams,
                        currentRoundIndex: currentRoundIndex
                    }));
                    currentRoundIndex++;
                    renderBracket(); // Re-render for the new round
                } else if (allCurrentMatchesDecided && currentRoundIndex === 2) { // Final round decided
                    console.log("[selectWinner] Grand Final decided. Tournament complete.");
                    // No explicit nextRound call needed, just update buttons
                    updateControlButtonsState(); 
                }
            }

            // `nextRound` and `prevRound` functions are now handled automatically by selectWinner
            // `prevRound` is still called by the button.
            function prevRound() {
                console.log("[prevRound] Attempting to go back a round.");
                if (historyStack.length === 0) {
                    // If no history, just reset to initial state
                    initializePlayoffs();
                    console.log("[prevRound] History is empty. Re-initializing playoffs.");
                    return;
                }

                const restoredState = historyStack.pop();
                playoffBracket = deepCopy(restoredState.playoffBracket);
                teams = deepCopy(restoredState.teams);
                currentRoundIndex = restoredState.currentRoundIndex;
                console.log("[prevRound] State restored from history. New currentRoundIndex:", currentRoundIndex);
                
                renderBracket();
            }

            function updateControlButtonsState() {
                // prevRoundButton is now directly visible/hidden based on historyStack.
                // It was removed from HTML, so this just manages its logic for potential future re-addition
                // prevRoundButton.disabled = historyStack.length === 0; 
                
                // nextRoundButton is gone, its logic is in selectWinner

                const finalMatch = playoffBracket[2][0];
                const isTournamentComplete = finalMatch && finalMatch.winnerId !== null;

                if (isTournamentComplete) {
                    shareResultsButton.style.display = 'inline-block';
                    currentRoundSpan.textContent = roundNames[3]; // "Campeão"
                    console.log("[updateControls] Tournament complete. Share button enabled, Round name updated.");
                } else {
                    shareResultsButton.style.display = 'none';
                    currentRoundSpan.textContent = roundNames[currentRoundIndex]; // Revert if not complete
                    console.log("[updateControls] Tournament not complete. Share button hidden.");
                }
            }


            function buildShareMessage() {
                let message = "🏆 Previsão: Playoffs BLAST Austin Major 🏆\n\n"; // Alterado conforme pedido
                const grandFinalMatch = playoffBracket[2][0];
                const champion = getTeamById(grandFinalMatch.winnerId);

                if (champion) {
                    message += `🎉 CAMPEÃO: ${champion.name} 🎉\n\n`;
                } else {
                    message += "Previsão incompleta - Quem será o Campeão?\n\n";
                }

                // Removida a linha "Resultados dos Playoffs:"
                // message += "Resultados dos Playoffs:\n"; 

                // Add Quarter-finals results
                playoffBracket[0].forEach((match, index) => {
                    const team1 = getTeamById(match.team1Id);
                    const team2 = getTeamById(match.team2Id);
                    if (team1 && team2 && match.winnerId) {
                        const winner = getTeamById(match.winnerId);
                        const loser = (match.winnerId === team1.id) ? team2 : team1;
                        message += `Q${index + 1}: ${winner.name} > ${loser.name}\n`;
                    }
                });

                // Add Semi-finals results
                playoffBracket[1].forEach((match, index) => {
                    const team1 = getTeamById(match.team1Id);
                    const team2 = getTeamById(match.team2Id);
                    if (team1 && team2 && match.winnerId) {
                        const winner = getTeamById(match.winnerId);
                        const loser = (match.winnerId === team1.id) ? team2 : team1;
                        message += `S${index + 1}: ${winner.name} > ${loser.name}\n`;
                    }
                });

                // Add Grand Final result
                if (grandFinalMatch && grandFinalMatch.team1Id && grandFinalMatch.team2Id && grandFinalMatch.winnerId) {
                    const winner = getTeamById(grandFinalMatch.winnerId);
                    const loser = (grandFinalMatch.winnerId === grandFinalMatch.team1Id) ? getTeamById(grandFinalMatch.team2Id) : getTeamById(grandFinalMatch.team1Id);
                    message += `Final: ${winner.name} > ${loser.name}\n`;
                }

                const customMessage = "Faz a tua previsão!"; // Alterado conforme pedido
                const shareUrl = "https://arena.rtp.pt/ao-minuto/simulador-major-austin/?v03"; // Alterado o link de partilha
                const hashtagX = " #MAJORnaRTP"; // Removido #CS2

                return {
                    textForX: `${message}${customMessage}${hashtagX}`,
                    textForWhatsApp: `${message}${customMessage} ${shareUrl}`,
                    urlForX: shareUrl,
                    fullTextForCopy: `${message}${customMessage}${hashtagX}\n\nLink para o simulador: ${shareUrl}`
                };
            }


            // --- Event Listeners ---
            shareResultsButton.onclick = () => {
                const grandFinalMatch = playoffBracket[2][0];
                if (grandFinalMatch && grandFinalMatch.winnerId !== null) {
                    socialShareMenu.style.display = socialShareMenu.style.display === 'none' ? 'block' : 'none';
                } else {
                    // This alert should ideally not be triggered if the button is correctly disabled/hidden
                    // but it's a good fallback.
                    alert("Ainda não há um campeão! Complete a Grande Final para partilhar os resultados.");
                }
            };
            
            closeShareMenuButton.onclick = () => {
                 socialShareMenu.style.display = 'none';
            };

            shareOnXButton.onclick = () => {
                const shareData = buildShareMessage();
                const xUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.textForX)}&url=${encodeURIComponent(shareData.urlForX)}`;
                window.open(xUrl, '_blank');
                socialShareMenu.style.display = 'none';
            };

            shareOnWhatsAppButton.onclick = () => { 
                const shareData = buildShareMessage();
                const whatsAppUrl = `https://wa.me/?text=${encodeURIComponent(shareData.textForWhatsApp)}`;
                window.open(whatsAppUrl, '_blank');
                socialShareMenu.style.display = 'none'; 
            };

            resetButton.onclick = initializePlayoffs;
            // nextRoundButton.onclick = nextRound; // Removido
            // prevRoundButton.onclick = prevRound; // Removido

            // Adicionado manualmente o clique para PrevRound no botão, já que o next é automático
            const prevRoundBtn = document.getElementById('prevRoundButton');
            if (prevRoundBtn) {
                prevRoundBtn.onclick = prevRound;
            }


            // --- Initialization ---
            function initializePlayoffs() {
                if (currentYearSpan) {
                    currentYearSpan.textContent = new Date().getFullYear();
                }
                historyStack = [];
                currentRoundIndex = 0; // Ensure it resets to the first round
                generateBracket();
                renderBracket();
                renderTwitchPlayer();
                shareResultsButton.style.display = 'none';
                socialShareMenu.style.display = 'none';
                // Certifica-se que o botão prevRound está desativado no início
                if (prevRoundBtn) {
                    prevRoundBtn.disabled = true;
                }
            }

            initializePlayoffs(); // Initial setup
        });
    </script>
</body>
</html>
